# ep_report_generator
Библиотека для создания отчетов для плат типа `Board` из библиотеки `epcore.elements`.

## Применение

1. Установите библиотеку `ep_report_generator`:

   ```
   python -m pip install git+https://github.com/EPC-MSU/ep_report_generator
   ```

2. В вашем python-скрипте импортируйте из библиотеки следующие классы:

   ```
   from report_generator import ConfigAttributes, ObjectsForReport, ReportGenerator
   ```

3. С помощью библиотеки `epcore.elements` создайте тестовую плату типа `Board`, для которой будет сгенерирован отчет. Если необходимо, чтобы в отчете была информация о `score`  ВАХ тестовой платы, создайте справочную плату:

   ```
   test_board = функция_которая_каким-то_образом_создает_тестовую_плату()
   ref_board = функция_которая_каким-то_образом_создает_справочную_плату()
   ```

4. Библиотека `ep_report_generator` может создать отчет как для всей платы целиком, так и для некоторых элементов и/или пинов на плате. Если вам нужно создать отчет только для некоторых элементов и/или пинов на плате, каким-либо образом определите индексы требуемых элементов и/или пинов.

   С определением индексов требуемых элементов не должно возникнуть проблем: в плате типа `Board` имеется атрибут `elements`, представляющий собой список элементов платы. Вам нужно определить индексы требуемых элементов в этом списке. Каждый элемент - это объект типа `Element`, у которого есть атрибут `pins` - список пинов на элементе. Индексы требуемых пинов нужно определить относительно одного большого списка пинов, объединяющего все пины на плате. Список всех пинов на плате получается последовательным объединением списков пинов на каждом элементе платы.

5. Создайте словарь-конфиг, по которому будет создан отчет. Для задания полей словаря-конфига используйте класс `ConfigAttributes`. Для задания объектов, которые должны быть включены в отчет, используйте класс `ObjectsForReport`:

   ```
   config = {ConfigAttributes.BOARD_TEST: test_board,
             ConfigAttributes.BOARD_REF: ref_board,
   		  ConfigAttributes.DIRECTORY: путь_к_папке_в_которой_нужно_сохранить_отчет,
             ConfigAttributes.OBJECTS: {ObjectsForReport.BOARD: нужно_ли_создать_отчет_для_всей_платы_целиком_True_или_False,
                                        ObjectsForReport.ELEMENT: [индексы_элементов_которые_должны_быть_включены_в_отчет],
                                        ObjectsForReport.PIN: [индексы_пинов_которые_должны_быть_включены_в_отчет]},
             ConfigAttributes.THRESHOLD_SCORE: пороговое_значение_score}
   ```

6. Создайте объект типа `ReportGenerator` и запустите его, передав в качестве аргумента словарь-конфиг:

   ```
   report_generator = ReportGenerator()
   report_generator.run(config)
   ```

7. После окончания работы в указанной вами папке появится отчет.

## Запуск примера в Windows

1. Склонируйте репозиторий и перейдите в папку репозитория `ep_report_generator`:

   ```
   git clone https://github.com/EPC-MSU/ep_report_generator
   cd ep_report_generator
   ```

2. Установите необходимые зависимости, выполнив скрипт `install.bat`:

   ```
   install.bat
   ```

3. Запустите пример, выполнив скрипт `run_example.bat`:

   ```
   run_example.bat
   ```

   В папке репозитория появятся две новые папки `report_for_manual_board` и `report_for_p10_board`, в которых будут лежать отчеты для двух плат.

## Запуск примера в Linux

1. Склонируйте репозиторий и перейдите в папку репозитория `ep_report_generator`:

   ```
   git clone https://github.com/EPC-MSU/ep_report_generator
   cd ep_report_generator
   ```

2. Установите необходимые зависимости, выполнив скрипт `install.sh`:

   ```
   bash install.sh
   ```

3. Запустите пример, выполнив скрипт `run_example.sh`:

   ```
   bash run_example.sh
   ```

   В папке репозитория появятся две новые папки `report_for_manual_board` и `report_for_p10_board`, в которых будут лежать отчеты для двух плат.

